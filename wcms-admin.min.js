function nl2br(t){return(t+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2")}function fieldSave(t,e,n,a,i){$("#save").show(),$.post("",{fieldname:t,token:token,content:e,target:n,menu:a,visibility:i},function(t){}).always(function(){window.location.reload()})}$("#settingsModal").on("show.bs.modal",function(t){var e=$(t.relatedTarget);$("a[href='"+e.data("target-tab")+"']").tab("show")}),$(document).tabOverride(!0,"textarea");var changing=!1;$(document).ready(function(){$("body").on("click","[data-loader-id]",function(t){$("#"+$(t.target).data("loader-id")).show()}).on("click","div.editText",function(){changing||(a=$(this),title=a.attr("title")?title='"'+a.attr("title")+'" ':"",a.hasClass("editable")?a.html("<textarea "+title+' id="'+a.attr("id")+"_field\" onblur=\"fieldSave(a.attr('id'),this.value,a.data('target'),a.data('menu'),a.data('visibility'));\">"+a.html()+"</textarea>"):a.html("<textarea "+title+' id="'+a.attr("id")+"_field\" onblur=\"fieldSave(a.attr('id'),nl2br(this.value),a.data('target'),a.data('menu'),a.data('visibility'));\">"+a.html().replace(/<br>/gi,"\n")+"</textarea>"),a.children(":first").focus(),autosize($("textarea")),changing=!0)}).on("click","i.menu-toggle",function(){var t=$(this),e=(setTimeout(function(){window.location.reload()},500),t.attr("data-menu"));t.hasClass("menu-item-hide")?(t.removeClass("glyphicon-eye-open menu-item-hide").addClass("glyphicon-eye-close menu-item-show"),t.attr("title","Hide page from menu").attr("data-visibility","hide"),$.post("",{fieldname:"menuItems",token:token,content:" ",target:"menuItemVsbl",menu:e,visibility:"hide"},function(t){})):t.hasClass("menu-item-show")&&(t.removeClass("glyphicon-eye-close menu-item-show").addClass("glyphicon-eye-open menu-item-hide"),t.attr("title","Show page in menu").attr("data-visibility","show"),$.post("",{fieldname:"menuItems",token:token,content:" ",target:"menuItemVsbl",menu:e,visibility:"show"},function(t){}))}).on("click",".menu-item-add",function(){var t=prompt("Enter page name");if(!t)return!1;t=t.replace(/[`~;:'",.<>\{\}\[\]\\\/]/gi,"").trim(),$.post("",{fieldname:"menuItems",token:token,content:t,target:"menuItem",menu:"none"},function(t){}).done(setTimeout(function(){window.location.reload()},500))}).on("click",".menu-item-up,.menu-item-down",function(){var t=$(this),e=t.hasClass("menu-item-up")?"-1":"1",n=t.attr("data-menu");$.post("",{fieldname:"menuItems",token:token,content:e,target:"menuItemOrder",menu:n},function(t){}).done(function(){$("#menuSettings").parent().load("index.php #menuSettings")})})});
